{"version":3,"sources":["components/Persons.js","components/Filter.js","components/SuccessNotification.js","components/ErrorNotification.js","components/PersonForm.js","services/persons.js","App.js","index.js"],"names":["Persons","_ref","persons","removePerson","react_default","a","createElement","Fragment","map","person","key","id","name","number","onClick","Filter","filter","updateFilter","onSubmit","event","preventDefault","value","onChange","ErrorNotification","message","className","PersonForm","newName","newNumber","addPerson","handlePersonChange","handleNumberChange","type","baseUrl","services_persons","axios","get","then","response","data","newObject","post","put","concat","delete","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setFilter","_useState9","_useState10","successMessage","setSuccessMessage","_useState11","_useState12","errorMessage","setErrorMessage","useEffect","personService","initialPersons","errorContent","error","standardStatus","setTimeout","successContent","personsToShow","toLowerCase","includes","SuccessNotification","components_ErrorNotification","components_Filter","target","components_PersonForm","updatedPersonObject","indexSameNamePerson","indexOf","personInArray","window","confirm","returnedPerson","p","objectSpread","catch","newPerson","console","log","components_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.830cd5b7.chunk.js","sourcesContent":["import React from 'react'\n\nconst Persons = ({ persons, removePerson }) => {\n    const display = () => \n    persons.map((person) => \n    <div key={person.id}>\n            {person.name} \n            {person.number} \n            <button onClick={() => removePerson(person.id, person.name)}> delete</button>\n    </div>) //change key to id?\n            return (\n                <>\n                {display()}\n                </>\n            )\n} \nexport default Persons\n","import React from 'react'\n\nconst Filter = ({persons, filter, updateFilter}) => {\n  \n\n    const callFilterFunction = event => {\n      event.preventDefault();\n      persons(filter);\n\n    //   if (persons.filter(person => person.name.toLowerCase()\n    //   .includes(filter.toLowerCase()))){\n\n    //   }\n    }\n\n  \n    return (\n      <div>\n            <form onSubmit={callFilterFunction}>\n              <div>\n              filter shown with:\n                  <input \n                  value={filter}\n                  onChange={updateFilter} //need to () => hSC()?\n                  />\n              </div>\n            </form>\n          </div>\n    )\n  }\n\n  export default Filter\n","import React from 'react'\n\nconst ErrorNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"success\">\n      {message}\n    </div>\n  )\n}\n\n  export default ErrorNotification\n","import React from 'react'\n\nconst ErrorNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\n  export default ErrorNotification\n","import React from 'react'\n\nconst PersonForm = ({newName, newNumber, addPerson, handlePersonChange, handleNumberChange }) => \n    <div>\n    <form onSubmit={addPerson}>\n      <div>\n        name:\n        <input\n              value={newName}\n              onChange={handlePersonChange}\n          />\n      </div>\n      <div>\n      number:\n        <input\n          value={newNumber}\n          onChange={handleNumberChange}\n        />\n        <br></br>\n      </div>\n      <div>\n         <button type=\"submit\">add or update</button>\n      </div>\n    </form>\n  </div>\n\n\nexport default PersonForm\n","import axios from 'axios'\nconst baseUrl = 'api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst removePerson = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { \n   getAll, create, update, removePerson\n    // update: update \n    // delete: delete\n  }\n","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport SuccessNotification from './components/SuccessNotification'\nimport ErrorNotification from './components/ErrorNotification'\nimport PersonForm from './components/PersonForm'\nimport personService from './services/persons'\nimport './index.css' \n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('')\n  const [ filter, setFilter] = useState('')\n  const [ successMessage, setSuccessMessage] = useState(null)\n  const [ errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n    })\n  }, [])\n\n  const errorContent = (error, standardStatus) => {\n    const message = error.response.data ? `Error: ${error.response.data.error}` : standardStatus\n    setErrorMessage(message)\n    setTimeout(() => {\n      setErrorMessage(null)\n    }, 5000)\n  }\n\n  const successContent = (message) => {\n    setSuccessMessage(message);\n    setTimeout(() => {\n      setSuccessMessage(null);\n    }, 5000)\n  }\n\n  // const setSuccess = (message) => {\n  //   setSuccessMessage(message);\n  //   setTimeout(() => {\n  //     setSuccessMessage(null);\n  //   }, notificationTimeout)\n  // };\n\n  \n  //filter/search function\n  const personsToShow = persons.filter(person => \n    person.name.toLowerCase().includes(filter.toLowerCase()))\n\n    //adding a person\n  const addPerson = (event) => {\n    event.preventDefault()\n    const updatedPersonObject = {\n      name: newName,\n      number: newNumber,\n      //id: persons[persons.length - 1].id + 1\n    }\n    const indexSameNamePerson = persons.map(person => person.name).indexOf(newName) //checking if person exists in db\n    if (indexSameNamePerson > -1) { //if already exists\n      const personInArray = persons[indexSameNamePerson]; //finding position\n      window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)\n      personService //updating \n      .update(personInArray.id, updatedPersonObject)\n      .then(returnedPerson => {\n        setPersons(persons\n          .map(p => p.id === personInArray.id \n            ? {\n              ...updatedPersonObject,\n              id: returnedPerson.id,\n            } \n            : p\n          )\n        )\n        successContent(`Updated ${newName}`)\n      })\n      .catch(error => {\n        errorContent(error, `Error: Information of ${newName} was already removed from the server `)\n        // personService.getAll().then(data => setPersons(data))\n      })\n    } else { //if added successfully\n      personService\n        .create(updatedPersonObject)\n        .then(newPerson => {\n        setPersons(persons.concat(newPerson))\n        successContent(`Added ${newName}`)\n        setNewName('')\n        setNewNumber('')\n    })\n    .catch(error => {\n      errorContent(error, error.message)\n      // const errorState = error.response.data.error\n      console.log(error.response.data)\n      // personService.getAll().then(data => setPersons(data))\n    })\n  }\n}\n\nconst deletePerson = (id, name) => {\n  if(window.confirm(`Delete ${name}?`)){\n    personService\n    .removePerson(id)\n    .then(() =>  {\n      setPersons(persons.filter(p => p.id !== id) )\n      console.log(newName)\n      setSuccessMessage(`Information of ${name} has been removed from the server`)\n    })\n    .catch(error => {\n      errorContent(error, `Have you already deleted ${name}?`)\n      // personService.getAll().then(data => setPersons(data))\n      })\n    }\n}\n    //updating state based on input updates\n  const handlePersonChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <SuccessNotification message={successMessage}/>\n      <ErrorNotification message={errorMessage}/>\n        <Filter \n          value={filter} \n          updateFilter={handleFilterChange} \n        />\n      <h3>Add a new</h3>\n        <PersonForm \n          newName={newName} \n          newNumber={newNumber} \n          addPerson={addPerson} \n          handlePersonChange={handlePersonChange} \n          handleNumberChange={handleNumberChange}         \n        />\n      <h3>Numbers</h3>\n        <Persons \n          persons={personsToShow}\n          removePerson={deletePerson}\n        />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nconst persons = [\n    { name: 'Arto Hellas'}\n]\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}